<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>
        
        Service Mesh概述 |
        
        启航的蜗牛</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- open graph -->
    <meta name="description" content="&gt; 关于 ServiceMesh &gt; 相关知识和进展，推荐资深大牛敖小剑的相关文章 &gt; https:&#x2F;&#x2F;skyao.io&#x2F; &gt; ServiceMesh 的社区网站 &gt; http:&#x2F;&#x2F;www.servicemesher.com&#x2F; &gt; 最近蚂蚁金服开源了分布式框架 &gt; SOFA，项目地址 &gt; Alipay，具体文档可见 Sofa &gt; 关于 Sofa Mesh, &gt; 暂时未开源，相关选型介绍可见 Sof">
<meta property="og:type" content="article">
<meta property="og:title" content="Service Mesh概述">
<meta property="og:url" content="https://www.alicharles.com/article/cncf/service-mesh/index.html">
<meta property="og:site_name" content="启航的蜗牛">
<meta property="og:description" content="&gt; 关于 ServiceMesh &gt; 相关知识和进展，推荐资深大牛敖小剑的相关文章 &gt; https:&#x2F;&#x2F;skyao.io&#x2F; &gt; ServiceMesh 的社区网站 &gt; http:&#x2F;&#x2F;www.servicemesher.com&#x2F; &gt; 最近蚂蚁金服开源了分布式框架 &gt; SOFA，项目地址 &gt; Alipay，具体文档可见 Sofa &gt; 关于 Sofa Mesh, &gt; 暂时未开源，相关选型介绍可见 Sof">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112385-fc700969-b005-425d-aae3-0b2ceb00bb76.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u7e36bab6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=541&originWidth=1403&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=253614&status=done&style=none&taskId=ua5d4ae73-de0e-4c51-83e1-02938969425&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112203-d17b8f25-e7db-4d72-af1e-45ef950f40eb.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uc5118911&margin=%5Bobject%20Object%5D&name=image.png&originHeight=209&originWidth=575&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=15468&status=done&style=none&taskId=u30594fea-0893-4d9b-9fce-b0d32ef7a34&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112212-a312154f-8cb3-4a2f-9f23-0f08fa845050.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua9da18a4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=357&originWidth=589&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=30427&status=done&style=none&taskId=u9cae802b-c0c1-458b-bcd6-f6c594c3f8a&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112236-9e23ea34-94c7-4501-a6ea-142d9036c19a.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u1e57ed0e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=345&originWidth=569&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=36040&status=done&style=none&taskId=ue6caaa64-bef6-4731-ab58-04387e41c17&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112249-e8e36f33-5386-4f84-9005-b018bc2cc82c.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ucca8000b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=337&originWidth=555&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=34428&status=done&style=none&taskId=u5da3ddef-224d-4187-977f-dd811e6dba7&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112968-a0087002-9923-49f4-aa64-4198e3a2bb4b.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u73746e35&margin=%5Bobject%20Object%5D&name=image.png&originHeight=408&originWidth=513&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=40501&status=done&style=none&taskId=ua94ad967-0e6e-4587-8517-f01ff678ed4&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595113042-10cbfc0f-f816-47c6-b524-705641f61670.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u7baa58b6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=401&originWidth=505&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=36493&status=done&style=none&taskId=uc7f88b83-5b91-46bc-8f64-21a9bb3673c&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114038-06a4204c-1583-4aaa-9d4e-2d0ddb02ae59.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u764a9bda&margin=%5Bobject%20Object%5D&name=image.png&originHeight=409&originWidth=515&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=41853&status=done&style=none&taskId=ud39898ce-b77c-4b4d-b497-4b8dc8eab0d&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114050-de1524ef-9150-48a8-af87-94d21a39c0a2.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua3296fc0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=655&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=58365&status=done&style=none&taskId=ud1beeab8-5000-47a6-8ae6-d8079110607&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114906-0c124cfe-1679-481e-bd1f-27860196480c.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u5aaba33f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=881&originWidth=1729&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=917093&status=done&style=none&taskId=uba3b778d-168f-4910-bc84-0d556eab7ea&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114403-59448ce3-e1cd-41bd-b26e-126c99bc6aac.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=328&id=u938d86b8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=655&originWidth=1024&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=160621&status=done&style=none&taskId=ue14aefa1-024d-4ed2-b74f-2d07f3f2125&title=&width=512">
<meta property="article:published_time" content="2016-06-04T16:00:00.000Z">
<meta property="article:modified_time" content="2022-05-15T04:19:28.000Z">
<meta property="article:author" content="charles">
<meta property="article:tag" content="CNCF">
<meta property="article:tag" content="ServiceMesh">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112385-fc700969-b005-425d-aae3-0b2ceb00bb76.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u7e36bab6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=541&originWidth=1403&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=253614&status=done&style=none&taskId=ua5d4ae73-de0e-4c51-83e1-02938969425&title=">

    <link rel="icon" sizes="any" mask href="//cdn.alicharles.com/static/images/logo.svg">
    <link rel="stylesheet" href="//cdn.alicharles.com/static/css/bootstrap.css">  
    <link rel="stylesheet" href="//cdn.alicharles.com/static/css/style.css">   
    <link rel="stylesheet" href="//cdn.alicharles.com/static/lib/fontawesome/css/all.css">   
    <link rel="stylesheet" href="//cdn.alicharles.com/static/lib/prism/css/prism.css">   
    
    

<meta name="generator" content="Hexo 6.2.0"></head>


<body>

  <!-- Nav -->
  <header>
    <nav class="navbar navbar-expand-md navbar-light charles-navbar py-0">
        <div class="container">
            <a class="navbar-brand mr-0 mr-md-2" href="/">
                <img src="//cdn.alicharles.com/static/images/charles-logo.png" height="32px" width="80px" alt="charles">
            </a>
            <button class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarDropdown">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">主页<span class="sr-only">(current)</span></a>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" target="_blank">
                            推荐
                        </a>
                        <div class="dropdown-menu dropdown-menu-right mt-0" >
                            <div class="row mx-0" style="width: 16rem">
                                
                                
                                    
                                    
                                    <div class="col-sm " style="overflow: hidden;">
                                        
                                            <a class="nav-link" href="/categories/jvm/" target="_blank">JVM</a>
                                        
                                            <a class="nav-link" href="/categories/design-pattern/" target="_blank">设计模式</a>
                                        
                                            <a class="nav-link" href="/tags/Lock/" target="_blank">Java锁</a>
                                        
                                    </div>
                                    
                                    
                                
                                    
                                    
                                    <div class="col-sm  border-left " style="overflow: hidden;">
                                        
                                            <a class="nav-link" href="/categories/disruptor/" target="_blank">Disruptor</a>
                                        
                                            <a class="nav-link" href="/categories/netty/" target="_blank">Netty</a>
                                        
                                            <a class="nav-link" href="/categories/ddd/" target="_blank">领域驱动设计</a>
                                        
                                    </div>
                                    
                                    
                                
                            </div>
                        </div>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/categories" target="_blank">分类</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/tags" target="_blank">标签</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/archives" target="_blank">归档</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about" target="_blank">关于</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/search" target="_blank">搜索</a>
                    </li>
                </ul>
            </div>
        </div> <!-- /container -->
    </nav>
</header>


  <!-- Main Content -->
  <div class="container bg-white my-3">
    <div class="post-article">
        <section id="posts" class="posts-expand">
            <h1>Service Mesh概述</h1>
<header class="post-header">
     <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="fa far fa-user"></i>
        </span>
        <span class="post-meta-item-text">发表于</span>
        <time itemprop="dateCreated" datetime="2016-06-05T00:00:00+08:00">
            2016-06-05
        </time>
    </span>
    <span class="post-category">
        
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="fa far fa-calendar-alt"></i>
        </span>
        <span class="post-meta-item-text">分类于</span>
        
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
            <a href="/categories/cncf/" itemprop="url" rel="index">
              <span itemprop="name">cncf</span>
            </a>
        </span>
        
    
    </span>
</header>
<div class="post-body">
<blockquote>
<p>关于 ServiceMesh 相关知识和进展，推荐资深大牛敖小剑的相关文章 <a target="_blank" rel="noopener" href="https://skyao.io/">https://skyao.io/</a><br>ServiceMesh 的社区网站 <a target="_blank" rel="noopener" href="http://www.servicemesher.com/">http://www.servicemesher.com/</a><br>最近蚂蚁金服开源了分布式框架 SOFA，项目地址 <a target="_blank" rel="noopener" href="https://github.com/alipay/">Alipay</a>，具体文档可见 <a target="_blank" rel="noopener" href="http://www.sofastack.tech/">Sofa</a><br>关于 Sofa Mesh, 暂时未开源，相关选型介绍可见 <a target="_blank" rel="noopener" href="https://skyao.io/publication/service-mesh-explore/">Sofa Mesh</a></p>
</blockquote>
<h2 id="一、-Service-Mesh-概念与定义"><a href="#一、-Service-Mesh-概念与定义" class="headerlink" title="一、 Service Mesh 概念与定义"></a>一、 Service Mesh 概念与定义</h2><p>这个概念首先由 Linkerd 的团队提出，其官方定义是:</p>
<blockquote>
<p>A service mesh is a dedicated infrastructure layer for handling service-to-service communication. It’s responsible for the reliable delivery of requests through the complex topology of services that comprise a modern, cloud native application. In practice, the service mesh is typically implemented as an array of lightweight network proxies that are deployed alongside application code, without the application needing to be aware.</p>
</blockquote>
<p>总结就是：</p>
<ol>
<li>服务网格是一个基础设施层</li>
<li>实现服务间请求的可靠传递、轻量级的网络代理</li>
<li>对应用与开发者透明</li>
</ol>
<p>故事的开始是微服务的出现与普及，很多大型单个应用程序可能由数百个服务组成，且每项服务可能有数千个实例，这些实例都是不断变化的。一旦实例状态变化，如 offline 变成 online 等，调度程序都需要进行动态调度。运行期间，这些服务之间的通信非常复杂，但这些通信却是每个应用的普遍需要的基础部分。因此将该部分抽象出来，形成服务网格，从而提供服务间可靠与高性能的通信服务。</p>
<h2 id="二、-Service-Mesh-解决的问题"><a href="#二、-Service-Mesh-解决的问题" class="headerlink" title="二、 Service Mesh 解决的问题"></a>二、 Service Mesh 解决的问题</h2><p>一个应用被拆分成了多个微服务，每个微服务又进行分布式部署，人工手动部署的话肯定是没人愿意的。因此 Docker 和 Kubernetes 等工具就出现了，实现了方便快捷将一个微服务应用成功部署。这些工具实现了整个部署过程的标准化。<br>一个服务产生价值的过程是在其运行期间与其他服务配合完成的，那么这个配合过程是否也能标准化呢？正如前文所述，运行期间，服务的状态与能力都是会变化的，为了能让应用稳定运行，这就需要每个服务都具备负载均衡、检测、通信可靠、安全、日志等能力。显然这些功能可以被抽成库，实现复用，比如谷歌的 Stubby、Netflix 的 HYstrix、Twitter 的 Finagle 等，提供了在运行期间服务之间的统一操作。其实这些库就是 service mesh。<br>库方式的 service mesh 存在许多缺点，如以下几点：</p>
<ul>
<li>与服务耦合，主要会有代码入侵和升级难的问题。 首先，代码入侵。开发者需要了解如何使用这些 SDK 并完成相应的非业务代码。 其次，升级难。库的更新会要求服务也更新，但出于对应用稳定性的考虑，或重新部署比较麻烦，开发者更新都比较谨慎，库的兼容性问题就出现了。</li>
<li>依赖冲突。比如两个库都用到了 fastjson，但由于依赖版本的不同，maven 最近原则选择了其中一个版本，那就可能导致另一个库在执行时出现 NoSuchMethod 等错误，就需要手动解决冲突。</li>
<li>无法跨语言。如果多语言支持代价很大，甚至可能需要重新开发一套。</li>
<li>应用开发和服务运维界线不清。故障时，应用开发者往往需要自行定位问题，无法由库的开发者统一对库进行监控与运维，等等。</li>
<li>另外一个办法就是代理，用另一个标准化服务代理当前服务就完美的解决了上述问题。这个代理服务分布式部署在每个服务所在的机子上，对原来形态各样服务的监控和负载均衡等操作，现在全部可通过对统一的代理服务的特定接口进行操作。</li>
</ul>
<p>由上，service mesh 实现了服务之间操作的标准化，实现了运行期的服务治理，让服务开发者回归业务开发与维护。</p>
<h2 id="三、-Service-mesh-的出现过程"><a href="#三、-Service-mesh-的出现过程" class="headerlink" title="三、 Service mesh 的出现过程"></a>三、 Service mesh 的出现过程</h2><p>如图所示，服务与服务直接交互转变成了 service mesh 代理。<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112385-fc700969-b005-425d-aae3-0b2ceb00bb76.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u7e36bab6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=541&originWidth=1403&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=253614&status=done&style=none&taskId=ua5d4ae73-de0e-4c51-83e1-02938969425&title=" alt="image.png"><br>这个过程中，还经历了如下几个阶段：</p>
<ol>
<li>主机之间直接相连<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112203-d17b8f25-e7db-4d72-af1e-45ef950f40eb.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uc5118911&margin=%5Bobject%20Object%5D&name=image.png&originHeight=209&originWidth=575&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=15468&status=done&style=none&taskId=u30594fea-0893-4d9b-9fce-b0d32ef7a34&title=" alt="image.png"></li>
<li>网络层实现通信控制，解决数据包顺序等问题<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112212-a312154f-8cb3-4a2f-9f23-0f08fa845050.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua9da18a4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=357&originWidth=589&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=30427&status=done&style=none&taskId=u9cae802b-c0c1-458b-bcd6-f6c594c3f8a&title=" alt="image.png"></li>
<li>集成到应用程序内部的流量控制<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112236-9e23ea34-94c7-4501-a6ea-142d9036c19a.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u1e57ed0e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=345&originWidth=569&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=36040&status=done&style=none&taskId=ue6caaa64-bef6-4731-ab58-04387e41c17&title=" alt="image.png"></li>
<li>解耦到应用程序外部的流量控制<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112249-e8e36f33-5386-4f84-9005-b018bc2cc82c.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ucca8000b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=337&originWidth=555&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=34428&status=done&style=none&taskId=u5da3ddef-224d-4187-977f-dd811e6dba7&title=" alt="image.png"></li>
<li>应用程序的中集成服务发现和断路器<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595112968-a0087002-9923-49f4-aa64-4198e3a2bb4b.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u73746e35&margin=%5Bobject%20Object%5D&name=image.png&originHeight=408&originWidth=513&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=40501&status=done&style=none&taskId=ua94ad967-0e6e-4587-8517-f01ff678ed4&title=" alt="image.png"></li>
<li>专门用于服务发现和断路器的软件包&#x2F;库。缺点是与服务耦合<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595113042-10cbfc0f-f816-47c6-b524-705641f61670.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u7baa58b6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=401&originWidth=505&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=36493&status=done&style=none&taskId=uc7f88b83-5b91-46bc-8f64-21a9bb3673c&title=" alt="image.png"></li>
<li>服务发现和断路器开源软件，如 Netflix OSS、Spring Cloud 等<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114038-06a4204c-1583-4aaa-9d4e-2d0ddb02ae59.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u764a9bda&margin=%5Bobject%20Object%5D&name=image.png&originHeight=409&originWidth=515&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=41853&status=done&style=none&taskId=ud39898ce-b77c-4b4d-b497-4b8dc8eab0d&title=" alt="image.png"></li>
<li>微服务代理 service mesh 出现，图中 sidecar 的中文是边车，就是吃鸡里面三个轮子的那种摩托车。这里就是一个代理服务。<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114050-de1524ef-9150-48a8-af87-94d21a39c0a2.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua3296fc0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=655&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=58365&status=done&style=none&taskId=ud1beeab8-5000-47a6-8ae6-d8079110607&title=" alt="image.png"></li>
</ol>
<p>每个阶段详细解释可阅读 <a target="_blank" rel="noopener" href="http://philcalcado.com/2017/08/03/pattern_service_mesh.html">Pattern: Service Mesh</a>这篇文章。</p>
<h2 id="四、-Service-mesh-代表产品"><a href="#四、-Service-mesh-代表产品" class="headerlink" title="四、 Service mesh 代表产品"></a>四、 Service mesh 代表产品</h2><p>Service Mesh 的代表产品主要有 Linkerd、Envoy、 Istio 和 Conduit。<br>Buoyant 公司给出了 service mesh 的定义，并发布第一个产品化的 Service Mesh Linkerd。2016 年 1 月 15 号，发布 0.0.7 版本，2017 年 4 月发布 1.0 版本，并加入了 CNCF。现在已经到 1.4.3 版本。 2016 年 9 月 Lyft 发布 service mesh 产品 Envoy。</p>
<p>按理 Linkerd 可能会是该领域的领头羊，只是在 2017 年 5 月，Google 和 IBM 等大佬公司们联合开发了 Istio，0.1 版本 release。目前最新版本是 0.8.0。其中，Istio 将 Lyft 开发的 Envoy 作为其数据面板部分。三大巨头合作后，相比 Linkerd 新增了服务控制相关的控制面板，功能强大。Isotio 发展迅速。而 Linkerd 却发展趋势急剧下降。2017 年 11 月 Linkerd 就提出了和 Istio 集成，作为数据面板替换掉 Envoy。不过 Envoy 稳定发展，并没有受影响。</p>
<p>2017 年 12 月，Buoyant 提出了最新产品 Conduit，对标 Istio。但目前看来，好像还是 Istio 发展更好。下面就概述下 Istio 的架构。</p>
<h2 id="五、Istio-架构"><a href="#五、Istio-架构" class="headerlink" title="五、Istio 架构"></a>五、Istio 架构</h2><p>Service mesh 的主要目的是实现服务运行时的标准化治理。Istio 将服务的管理分为了两大部分：数据面板和控制面板。<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114906-0c124cfe-1679-481e-bd1f-27860196480c.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u5aaba33f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=881&originWidth=1729&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=917093&status=done&style=none&taskId=uba3b778d-168f-4910-bc84-0d556eab7ea&title=" alt="image.png"><br>数据面板：就是上文中的 sidecar 部分，代理了服务的所有通信。 控制面板：运行期间的服务控制，如流量控制和配置管理等。</p>
<p>Istio 中，数据面板由 Envoy 实现。控制面板包括 Pilot,Mixer,Istio-Auth 三部分。 Envoy 的功能包括：HTTP／1.1、HTTP&#x2F;2、gRPC 和 TCP 通信；请求过滤；服务健康检查；加密与认证；日志服务；Distribution Trace 等。 Pilot：服务发现；路由；负载均衡；故障处理；规则配置。官方描述为收集与验证配置，并传递给 Istio 的其他组件。 Mixer：为了减少 envoy 与服务的耦合而存在，让服务开发者仅关系业务本身，而验证规则、服务监控规则等则分离出来放到 Mixer 中，由运维人员负责。Mixer 的功能包括：前提条件检查，比如请求的合法性验证；配额管理，如限速；监测报告，上传服务日志等。 Istio-Auth：用于保证服务与服务之间的通信安全。包括：身份认证，密钥管理，请求审核等。<img src="https://cdn.nlark.com/yuque/0/2022/png/104130/1649595114403-59448ce3-e1cd-41bd-b26e-126c99bc6aac.png#clientId=u2b29b9ab-bb64-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=328&id=u938d86b8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=655&originWidth=1024&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=160621&status=done&style=none&taskId=ue14aefa1-024d-4ed2-b74f-2d07f3f2125&title=&width=512" alt="image.png" width="512"></p>
<h2 id="六、-总结"><a href="#六、-总结" class="headerlink" title="六、 总结"></a>六、 总结</h2><p>service mesh 还是个相对较新的技术，不过已经被认为是下一代的微服务，可见该技术对于微服务的必要性。Service mesh 的最大功能在于将运行期的微服务通信，微服务管理进行标准化管理，从而简化了微服务的开发与运维。</p>

</div>
<footer class="post-meta">
    <span class="post-tag">
        
        <span class="post-meta-item-icon">
                <i class="fa far fa-folder-open"></i>
            </span>
        
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                <a href="/tags/CNCF/" itemprop="url" rel="index">
                  <span itemprop="name">CNCF</span>
                </a>
            </span>
        
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                <a href="/tags/ServiceMesh/" itemprop="url" rel="index">
                  <span itemprop="name">ServiceMesh</span>
                </a>
            </span>
        
        
    </span>
</footer>

<div class="author">
    <!--个人信息-->
    
    <img class="author-image qrcode" itemprop="image"
         src="https://cdn.alicharles.com/static/images/mp_qrcode.jpg"
         alt="https://cdn.alicharles.com/static/images/mp_qrcode.jpg"/>
    
</div>


<div class="post-nav">
    <div class="post-nav-next post-nav-item">
        
        <a href="/article/cncf/cloud-native/" rel="next" title="Cloud Native定义">
            <i class="fa far fa-chevron-left"></i> Cloud Native定义
        </a>
        
    </div>
    <span class="post-nav-divider"></span>
    <div class="post-nav-prev post-nav-item">
        
        <a href="/article/jvm/jvm-gc-allocation/" rel="prev" title="JVM（三）内存分配与回收策略">
            JVM（三）内存分配与回收策略 <i class="fa far fa-chevron-right"></i>
        </a>
        
    </div>
</div>

        </section>
    </div>
    <div id="post-toc" class="post-toc">
        <div class="post-toc-title">文章目录</div>
        <div class="post-toc-content">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81-Service-Mesh-%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9A%E4%B9%89"><span class="toc-text">一、 Service Mesh 概念与定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-Service-Mesh-%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">二、 Service Mesh 解决的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81-Service-mesh-%E7%9A%84%E5%87%BA%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="toc-text">三、 Service mesh 的出现过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-Service-mesh-%E4%BB%A3%E8%A1%A8%E4%BA%A7%E5%93%81"><span class="toc-text">四、 Service mesh 代表产品</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Istio-%E6%9E%B6%E6%9E%84"><span class="toc-text">五、Istio 架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81-%E6%80%BB%E7%BB%93"><span class="toc-text">六、 总结</span></a></li></ol>
        </div>
    </div>
    
</div>

  <!-- footer -->
  <div class="footer">
    <div class="container justify-content-center py-4">
        Charles &copy;2022 &nbsp <a href="https://beian.miit.gov.cn/" target="_blank">浙ICP备14035515号-1</a></span> &nbsp
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253510913'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1253510913%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
    </div>

    <!-- scrollTop -->
    <div class="go-top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- js -->
    <script src="//cdn.alicharles.com/static/lib/jquery/jquery.min.js"></script>
    <script src="//cdn.alicharles.com/static/lib/popper.js/popper.js"></script>
    <script src="//cdn.alicharles.com/static/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="//cdn.alicharles.com/static/lib/prism/js/prism.js"></script>
    <script src="//cdn.alicharles.com/static/js/app.js"></script>

    
</div>
</body>

</html>
