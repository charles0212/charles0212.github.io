{"title":"Shell（一）常用命令","slug":"yuque/Shell（一）常用命令","date":"2019-06-20T16:00:00.000Z","updated":"2022-05-15T04:19:28.495Z","comments":true,"path":"api/articles/shell/shell-command.json","excerpt":"find + xargs将当前目录下.bak的文件，移动到临时/tmp 下面find . -name \"*.bak\" | xargs -I '{}' mv {} /tmp移动到/tmp 临时目录下，不要使用rm -rf 命令防止误删，其中-I‘{}’标识占位符awk分隔字符串，排序grep charles /home/zhangcheng.log | awk '{split($0,a,\",\");if (index(a[11],\"5000000000013\") > 0 || index(a[11],\"5000000000059\") > 0) print subst","covers":["/images/c1.jpg"],"content":"<h3 id=\"find-xargs\"><a href=\"#find-xargs\" class=\"headerlink\" title=\"find + xargs\"></a>find + xargs</h3><p>将当前目录下.bak 的文件，移动到临时&#x2F;tmp 下面</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">find . -name &quot;*.bak&quot; | xargs -I &#39;&#123;&#125;&#39; mv &#123;&#125; &#x2F;tmp</code></pre>\n\n<p>移动到&#x2F;tmp 临时目录下，不要使用 rm -rf 命令防止误删，其中-I ‘{}’标识占位符</p>\n<h3 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h3><p>分隔字符串，排序</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">grep charles &#x2F;home&#x2F;zhangcheng.log | awk &#39;&#123;split($0,a,&quot;,&quot;);if (index(a[11],&quot;5000000000013&quot;) &gt; 0 || index(a[11],&quot;5000000000059&quot;) &gt; 0) print substr(a[8],9,16),substr(a[11],18,13)&#125;&#39; | sort | uniq</code></pre>\n\n<p>区分奇数行和偶数行</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">awk &#39;&#123;if (NR%2&#x3D;&#x3D;1) &#123;printf(&quot;%s\\t&quot;,$0);&#125; else &#123;printf(&quot;%s\\n&quot;,$0);&#125;&#125;&#39; diagnostic.txt</code></pre>\n\n<h3 id=\"sed\"><a href=\"#sed\" class=\"headerlink\" title=\"sed\"></a>sed</h3><p>sed 删除不是以^ 开始的行，并且将正则匹配的^[ ]*替换为空</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">## hmaster\n  hmaster-test\n##&#x2F; hmaster\n\nxx 为上面的3行数据，输出hmaster\n\ncat xx | sed -e &#39;&#x2F;^## &#x2F;!d&#39; | sed -e &#39;s&#x2F;^##[ ]*&#x2F;&#x2F;g&#39;\n\n删除不带loc的行，替换[ \\t]*&lt;loc&gt;为空，&lt;&#x2F;loc&gt;为空\ncat sitemap.xml | sed -e &#39;&#x2F;loc&#x2F;!d;s&#x2F;[ \\t]*&lt;loc&gt;&#x2F;&#x2F;g;s&#x2F;&lt;\\&#x2F;loc&gt;&#x2F;&#x2F;g&#39;</code></pre>\n\n<h3 id=\"nc\"><a href=\"#nc\" class=\"headerlink\" title=\"nc\"></a>nc</h3><p>判断段是否开启</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">nc -vuz 192.168.99.100 2818\n\nfound 0 associations\nfound 1 connections:\n1:\tflags&#x3D;82&lt;CONNECTED,PREFERRED&gt;\n\toutif (null)\n\tsrc 192.168.99.1 port 53888\n\tdst 192.168.99.100 port 2818\n\trank info not available\n\nConnection to 192.168.99.100 port 2818 [udp&#x2F;rmlnk] succeeded!</code></pre>\n\n<p>连接某个端口，类似 telnet，nc 127.0.0.1 12201</p>\n<p>查找 java maven 版本差异<br><a href=\"https://www.alicharles.com/article/jar-diff/\">https://www.alicharles.com/article/jar-diff/</a></p>\n","more":"<h3 id=\"find-xargs\"><a href=\"#find-xargs\" class=\"headerlink\" title=\"find + xargs\"></a>find + xargs</h3><p>将当前目录下.bak 的文件，移动到临时&#x2F;tmp 下面</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">find . -name &quot;*.bak&quot; | xargs -I &#39;&#123;&#125;&#39; mv &#123;&#125; &#x2F;tmp</code></pre>\n\n<p>移动到&#x2F;tmp 临时目录下，不要使用 rm -rf 命令防止误删，其中-I ‘{}’标识占位符</p>\n<h3 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h3><p>分隔字符串，排序</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">grep charles &#x2F;home&#x2F;zhangcheng.log | awk &#39;&#123;split($0,a,&quot;,&quot;);if (index(a[11],&quot;5000000000013&quot;) &gt; 0 || index(a[11],&quot;5000000000059&quot;) &gt; 0) print substr(a[8],9,16),substr(a[11],18,13)&#125;&#39; | sort | uniq</code></pre>\n\n<p>区分奇数行和偶数行</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">awk &#39;&#123;if (NR%2&#x3D;&#x3D;1) &#123;printf(&quot;%s\\t&quot;,$0);&#125; else &#123;printf(&quot;%s\\n&quot;,$0);&#125;&#125;&#39; diagnostic.txt</code></pre>\n\n<h3 id=\"sed\"><a href=\"#sed\" class=\"headerlink\" title=\"sed\"></a>sed</h3><p>sed 删除不是以^ 开始的行，并且将正则匹配的^[ ]*替换为空</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">## hmaster\n  hmaster-test\n##&#x2F; hmaster\n\nxx 为上面的3行数据，输出hmaster\n\ncat xx | sed -e &#39;&#x2F;^## &#x2F;!d&#39; | sed -e &#39;s&#x2F;^##[ ]*&#x2F;&#x2F;g&#39;\n\n删除不带loc的行，替换[ \\t]*&lt;loc&gt;为空，&lt;&#x2F;loc&gt;为空\ncat sitemap.xml | sed -e &#39;&#x2F;loc&#x2F;!d;s&#x2F;[ \\t]*&lt;loc&gt;&#x2F;&#x2F;g;s&#x2F;&lt;\\&#x2F;loc&gt;&#x2F;&#x2F;g&#39;</code></pre>\n\n<h3 id=\"nc\"><a href=\"#nc\" class=\"headerlink\" title=\"nc\"></a>nc</h3><p>判断段是否开启</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">nc -vuz 192.168.99.100 2818\n\nfound 0 associations\nfound 1 connections:\n1:\tflags&#x3D;82&lt;CONNECTED,PREFERRED&gt;\n\toutif (null)\n\tsrc 192.168.99.1 port 53888\n\tdst 192.168.99.100 port 2818\n\trank info not available\n\nConnection to 192.168.99.100 port 2818 [udp&#x2F;rmlnk] succeeded!</code></pre>\n\n<p>连接某个端口，类似 telnet，nc 127.0.0.1 12201</p>\n<p>查找 java maven 版本差异<br><a href=\"https://www.alicharles.com/article/jar-diff/\">https://www.alicharles.com/article/jar-diff/</a></p>\n","categories":[{"name":"shell","path":"api/categories/shell.json"}],"tags":[{"name":"Shell","path":"api/tags/Shell.json"}]}